"""
Default settings
Can be overriden by a local settings_local.py file (gitignored)
Import settings module instead of settings_default or settings_local directly
"""
import os
from datetime import datetime

#### DB settings

# Nagios database connection string
# http://lin033dsy/nagios/
DB_CONNECTION_STRING = 'mysql+pymysql://ndoutils:nagiosadmin@lin033dsy/nagios'

#### Dataset settings

LIST_MACH = [

'ssdhwip008dsy',
'ssdhwip007dsy',
'dell3353dsy',
'dell3354dsy',
'dell3355dsy',
'dell3356dsy',
'dell3357dsy',
'dell3358dsy',
'dell3359dsy',
'dell3360dsy',
'dell3361dsy',
'dell3362dsy', #no data from this one
'dell3364dsy',
'dell3365dsy',
'dell3366dsy',
'dell3367dsy',
'dell3368dsy',
'dell3369dsy',
'ENOWINB001DSY', 
'ENOWINB002DSY', 
'WIP285DSY',
'WIP311DSY',
'WIP326DSY',
'WIP327DSY',
'WIP328DSY',
'WIP329DSY',
'WIP330DSY',
'WIP331DSY',
'WIP332DSY',
'WIP333DSY',
'WIP334DSY',
'WIP339DSY',
'WIP340DSY',
'WIP342DSY',
'WIP344DSY',
]

LIST_MACH = [a.lower() for a in LIST_MACH]



# Options to pass to DB query function
DB_QUERY_ARGS = dict(
    connection_string=DB_CONNECTION_STRING,
    interval='hour',
    start_date=datetime(2021, 4, 3),
    end_date=None,
    os='windows',
    machines_to_include=LIST_MACH,
    machines_to_exclude=None,
    limit=None
)

# If specified, length of a random subset of machine from above
# DB query result, all machines from query result otherwise
NUMBER_OF_RANDOM_MACHINES = None

# CPU values normalization thresholds
# Eg, if set to [10, 30, 60, 100], with input series
# (7, 12, 30, 55, 80, 90, 100) would get normalized to
# (0, 1, 1, 2, 3, 3, 3)
# Not applied if set to None
CPU_THRESHOLD_NORMALIZATION = None # [5, 30, 60, 100]

# If specified, increases interval between records to the specified
# interval, with CPU values averaged accordingly
# Not used in Fourier version 
INTERVAL_SECONDS = None

#### Clustering settings

# Options to pass to TimeSeriesKMeans
TSKM_ARGS = dict(
    n_clusters=5,
    #random_state=0,
    metric= 'dtw' , # 'euclidean'
    n_init=6,
    max_iter=30,
    #max_iter_barycenter=50,
    n_jobs=-1
)

#### Output files settings

# Directory to store html/json/text files results
# Absolute or relative
# Created if not existing
# Note: tmp directory is gitignored
RESULTS_DIRECTORY = os.path.join('tmp', datetime.now().strftime('%Y-%m-%d_%H-%M-%S_clustering'))

#Fourier mode if FOURIER=TRUE, regular mode if FOURIER=False
FOURIER = False


#### Settings only for exploitation.py
CLUSTERS_RANGE = (2,15)

ELBOW_DIRECTORY = os.path.join('tmp/elbow', datetime.now().strftime('%Y-%m-%d_%H-%M-%S'))

NORM_MODE = 'mach'

